<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <title>ä¼šè®®è¿è¥åŠ©æ‰‹</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: #f5f5f5;
        color: rgb(102, 102, 102);
      }
      #app {
        display: flex;
        height: 100vh;
      }
      .sidebar {
        width: 240px;
        background: rgb(0, 45, 40);
        color: #fff;
        display: flex;
        flex-direction: column;
        padding: 16px 12px;
      }
      .sidebar-header {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 12px;
      }
      .app-logo {
        width: 32px;
        height: 32px;
        border-radius: 10px;
        background: rgb(26, 77, 72);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
      }
      .app-title {
        font-weight: 600;
      }
      .current-meeting {
        font-size: 12px;
        color: rgba(255, 255, 255, 0.8);
        margin-bottom: 12px;
      }
      .current-meeting-name {
        font-weight: 600;
      }
      .nav {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: auto;
      }
      .nav-item {
        border: none;
        border-radius: 8px;
        padding: 8px 10px;
        background: transparent;
        color: #fff;
        text-align: left;
        cursor: pointer;
        font-size: 14px;
      }
      .nav-item:hover {
        background: rgba(255, 255, 255, 0.1);
      }
      .nav-item.active {
        background: rgb(26, 77, 72);
      }
      .sidebar-footer {
        font-size: 11px;
        color: rgba(255, 255, 255, 0.7);
        margin-top: 12px;
      }
      .main {
        flex: 1;
        padding: 16px 24px;
        overflow-y: auto;
      }
      .section-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 16px;
      }
      .section-header h1 {
        margin: 0;
        font-size: 22px;
        color: rgb(26, 77, 72);
      }
      .section-body {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }
      .empty-hint {
        padding: 16px;
        border-radius: 12px;
        background: #fff7ea;
        color: #8a6122;
        border: 1px solid rgba(225, 184, 127, 0.7);
      }
      .card {
        background: #ffffff;
        border-radius: 16px;
        padding: 16px 20px;
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.04);
      }
      .form-group {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 12px;
      }
      .form-group-inline {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 12px;
      }
      .form-group label {
        font-size: 14px;
      }
      input[type="text"],
      input[type="number"],
      input[type="time"],
      textarea,
      select {
        border-radius: 10px;
        border: 1px solid rgb(204, 204, 204);
        padding: 8px 10px;
        font-size: 14px;
        font-family: inherit;
      }
      textarea {
        resize: vertical;
      }
      .form-actions {
        display: flex;
        justify-content: flex-end;
        gap: 8px;
        margin-top: 16px;
      }
      .form-actions-left {
        display: flex;
        justify-content: flex-start;
        gap: 8px;
        margin-top: 8px;
      }
      .btn {
        border-radius: 999px;
        border: none;
        padding: 8px 16px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 500;
        font-family: inherit;
      }
      .btn.primary {
        background: rgb(26, 77, 72);
        color: #fff;
      }
      .btn.primary:hover {
        background: rgb(0, 45, 40);
      }
      .btn.secondary {
        background: #ffffff;
        border: 1px solid rgb(204, 204, 204);
        color: rgb(26, 77, 72);
      }
      .btn.secondary:hover {
        background: #f2f2f2;
      }
      .btn.small {
        padding: 4px 10px;
        font-size: 13px;
      }
      .meeting-tabs {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      .meeting-tab {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 12px;
        border-radius: 12px;
        background: #ffffff;
        cursor: pointer;
        border: 1px solid transparent;
      }
      .meeting-tab-main {
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .meeting-tab-name {
        font-weight: 500;
      }
      .meeting-tab-actions {
        display: flex;
        gap: 4px;
      }
      .meeting-tab button {
        border-radius: 999px;
        border: none;
        padding: 4px 8px;
        font-size: 12px;
        cursor: pointer;
      }
      .meeting-tab button.edit {
        background: rgb(225, 184, 127);
        color: #fff;
      }
      .meeting-tab button.delete {
        background: #eee;
      }
      .meeting-tab.selected {
        background: rgb(26, 77, 72);
        color: #fff;
      }
      .meeting-tab.selected .meeting-tab-name {
        color: #fff;
      }
      .meeting-tab.selected button.edit {
        background: #fff;
        color: rgb(26, 77, 72);
      }
      .toggle-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
      }
      .toggle {
        position: relative;
        width: 80px;
        height: 32px;
        border-radius: 999px;
        border: none;
        background: rgb(169, 169, 169);
        padding: 0 8px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        cursor: pointer;
        color: #fff;
        font-size: 13px;
      }
      .toggle.on {
        background: rgb(26, 77, 72);
      }
      .toggle-thumb {
        position: absolute;
        top: 3px;
        left: 4px;
        width: 26px;
        height: 26px;
        border-radius: 50%;
        background: #fff;
        transition: transform 0.2s ease;
      }
      .toggle.on .toggle-thumb {
        transform: translateX(40px);
      }
      .toggle-label {
        margin-left: auto;
        margin-right: 6px;
      }
      .agenda-header-row {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 8px;
      }
      .agenda-table-wrapper {
        overflow-x: auto;
      }
      .agenda-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 13px;
      }
      .agenda-table th,
      .agenda-table td {
        border-bottom: 1px solid #eee;
        padding: 6px 8px;
        text-align: left;
      }
      .agenda-table th {
        background: #fafafa;
      }
      .agenda-row {
        cursor: move;
      }
      .agenda-row.lunch {
        background: #f4f4f4;
      }
      .drag-handle {
        cursor: grab;
        font-size: 16px;
      }
      .input-error {
        border-color: #e57373;
      }
      .tabs {
        display: flex;
        gap: 8px;
      }
      .tab-button {
        border-radius: 999px;
        border: 1px solid rgb(204, 204, 204);
        background: #fff;
        padding: 6px 12px;
        cursor: pointer;
        font-size: 13px;
      }
      .tab-button.active {
        background: rgb(26, 77, 72);
        color: #fff;
        border-color: rgb(26, 77, 72);
      }
      .participants-list {
        font-size: 14px;
      }
      .participants-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 13px;
      }
      .participants-table th,
      .participants-table td {
        border-bottom: 1px solid #eee;
        padding: 6px 8px;
      }
      .groups-container {
        display: flex;
        gap: 12px;
        overflow-x: auto;
      }
      .group-column {
        min-width: 180px;
        background: #fafafa;
        border-radius: 12px;
        padding: 8px;
      }
      .group-title {
        font-weight: 500;
        margin-bottom: 4px;
      }
      .leader-slot {
        border-radius: 8px;
        background: #fff;
        border: 1px dashed rgb(204, 204, 204);
        padding: 4px 6px;
        margin-bottom: 6px;
        font-size: 12px;
      }
      .leader-label {
        font-weight: 500;
        margin-right: 4px;
      }
      .leader-placeholder {
        color: #999;
      }
      .leader-container {
        display: inline-flex;
        align-items: center;
        gap: 4px;
      }
      .leader-remove {
        border: none;
        background: transparent;
        color: #c00;
        cursor: pointer;
        font-size: 12px;
      }
      .group-members {
        display: flex;
        flex-direction: column;
        gap: 4px;
        min-height: 40px;
      }
      .member-card {
        border-radius: 999px;
        background: #fff;
        padding: 4px 8px;
        font-size: 13px;
        cursor: grab;
        border: 1px solid #ddd;
      }
      .group-column.drag-over {
        outline: 2px dashed rgb(26, 77, 72);
      }
      .leader-slot.drag-over {
        outline: 2px solid rgb(26, 77, 72);
      }
      .two-column {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }
      .check-list {
        min-height: 40px;
      }
      .check-list li {
        padding: 2px 0;
      }
      .output-card {
        max-width: 960px;
      }
      .output-card h2 {
        margin-top: 0;
        margin-bottom: 8px;
      }
      .output-block {
        margin-top: 12px;
      }
      .output-block h3 {
        margin-bottom: 6px;
      }
      .output-part-block {
        margin-top: 4px;
      }
      .output-part-block p {
        margin: 2px 0;
      }
      .download-area {
        margin-top: 12px;
        font-size: 13px;
      }
      .download-link {
        color: rgb(26, 77, 72);
      }
      .output-table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 4px;
        font-size: 13px;
      }
      .output-table th,
      .output-table td {
        border: 1px solid #e0e0e0;
        padding: 6px 8px;
        text-align: left;
      }
      .output-table th {
        background: #fafafa;
      }
      .person-chip {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 2px 6px;
        margin: 2px 4px 2px 0;
        border-radius: 999px;
        background: #fff;
        border: 1px solid #e0e0e0;
        color: #000000;
      }
      .person-chip + .person-chip::before {
        content: "ã€";
        margin-right: 2px;
      }
      .person-avatar {
        width: 18px;
        height: 18px;
        border-radius: 50%;
        background: rgb(26, 77, 72);
        color: #fff;
        font-size: 11px;
        display: flex;
        align-items: center;
        justify-content: center;
        user-select: none;
      }

      @media (max-width: 900px) {
        #app {
          flex-direction: column;
        }
        .sidebar {
          width: 100%;
          flex-direction: row;
          align-items: center;
          flex-wrap: wrap;
          gap: 8px;
        }
        .nav {
          flex-direction: row;
          flex-wrap: wrap;
        }
        .main {
          padding: 12px;
        }
      }
    </style>
  </head>
  <body>
    <div id="app">
      <aside class="sidebar">
        <div class="sidebar-header">
          <div class="app-logo">ğŸ“‹</div>
          <div class="app-title">ä¼šè®®è¿è¥åŠ©æ‰‹</div>
        </div>
        <div class="current-meeting">
          å½“å‰ä¼šè®®ï¼š<span id="currentMeetingName" class="current-meeting-name">æœªé€‰æ‹©</span>
        </div>
        <nav class="nav">
          <button class="nav-item active" data-section="board">ä¼šè®®çœ‹æ¿</button>
          <button class="nav-item" data-section="location">ä¼šè®®åœ°ç‚¹</button>
          <button class="nav-item" data-section="agenda">ä¼šè®®è®®ç¨‹</button>
          <button class="nav-item" data-section="participants">ä¼šè®®äººå‘˜</button>
          <button class="nav-item" data-section="output">ä¿¡æ¯è¾“å‡º</button>
        </nav>
        <div class="sidebar-footer"><small>æœ¬åœ°å­˜å‚¨ç‰ˆæœ¬</small></div>
      </aside>

      <main class="main">
        <!-- ä¼šè®®çœ‹æ¿ -->
        <section class="section" id="section-board">
          <header class="section-header">
            <h1>ä¼šè®®çœ‹æ¿</h1>
            <button id="btnAddMeeting" class="btn primary">+ æ–°å»ºä¼šè®®</button>
          </header>
          <div id="boardEmptyHint" class="empty-hint">ç›®å‰è¿˜æ²¡æœ‰ä¼šè®®,è¯·ç‚¹å‡»å³ä¸Šè§’ã€Œæ–°å»ºä¼šè®®ã€ã€‚</div>
          <div class="meeting-tabs" id="meetingTabs"></div>
        </section>

        <!-- ä¼šè®®åœ°ç‚¹ -->
        <section class="section" id="section-location" hidden>
          <header class="section-header">
            <h1>ä¼šè®®åœ°ç‚¹</h1>
          </header>
          <div class="section-body">
            <div id="locationNoMeeting" class="empty-hint" hidden>è¯·å…ˆåœ¨ã€Œä¼šè®®çœ‹æ¿ã€ä¸­åˆ›å»ºå¹¶é€‰æ‹©ä¸€ä¸ªä¼šè®®ã€‚</div>
            <div id="locationForm" class="card" hidden>
              <div class="form-group">
                <label for="inputAddress">ä¼šè®®åœ°å€</label>
                <textarea
                  id="inputAddress"
                  rows="3"
                  placeholder="è¯·è¾“å…¥ä¼šè®®å…·ä½“åœ°å€ï¼Œä¾‹å¦‚ï¼šé›æ –æ¹– XX ä¼šè®®ä¸­å¿ƒ 1 å·æ¥¼ 301 å®¤"
                ></textarea>
              </div>
              <div class="form-group toggle-row">
                <div>æ˜¯å¦å·²æ‹‰ä¼šè®®æ‘†å°å·¥å•ï¼Ÿ</div>
                <button id="toggleWorkOrder" class="toggle">
                  <span class="toggle-thumb"></span>
                  <span id="toggleWorkOrderLabel" class="toggle-label">æ²¡æœ‰</span>
                </button>
              </div>
              <div class="form-actions">
                <button id="btnLocationSave" class="btn secondary">ä¿å­˜</button>
                <button id="btnLocationNext" class="btn primary">ä¸‹ä¸€æ­¥ï¼šä¼šè®®è®®ç¨‹</button>
              </div>
            </div>
          </div>
        </section>

        <!-- ä¼šè®®è®®ç¨‹ -->
        <section class="section" id="section-agenda" hidden>
          <header class="section-header">
            <h1>ä¼šè®®è®®ç¨‹</h1>
          </header>
          <div class="section-body">
            <div id="agendaNoMeeting" class="empty-hint" hidden>è¯·å…ˆåœ¨ã€Œä¼šè®®çœ‹æ¿ã€ä¸­åˆ›å»ºå¹¶é€‰æ‹©ä¸€ä¸ªä¼šè®®ã€‚</div>
            <div id="agendaForm" hidden>
              <div class="card">
                <div class="form-group-inline">
                  <label for="inputStartTime">ä¼šè®®å¼€å§‹æ—¶é—´ï¼ˆ24 å°æ—¶åˆ¶ï¼‰ï¼š</label>
                  <input id="inputStartTime" type="time" />
                </div>
              </div>
              <div class="card">
                <div class="agenda-header-row">
                  <div>è®®ç¨‹åˆ—è¡¨</div>
                  <button id="btnAddAgendaItem" class="btn secondary small">+ æ·»åŠ ä¸€è¡Œ</button>
                </div>
                <div class="agenda-table-wrapper">
                  <table class="agenda-table">
                    <thead>
                      <tr>
                        <th style="width: 40px;"></th>
                        <th>ç±»å‹</th>
                        <th>è®®ç¨‹</th>
                        <th>è´Ÿè´£äºº</th>
                        <th>æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰</th>
                        <th>æ—¶é—´</th>
                        <th style="width: 40px;">æ“ä½œ</th>
                      </tr>
                    </thead>
                    <tbody id="agendaTbody"></tbody>
                  </table>
                </div>
              </div>
              <div class="form-actions">
                <button id="btnAgendaSave" class="btn secondary">ä¿å­˜</button>
                <button id="btnAgendaNext" class="btn primary">ä¸‹ä¸€æ­¥ï¼šä¼šè®®äººå‘˜</button>
              </div>
            </div>
          </div>
        </section>

        <!-- ä¼šè®®äººå‘˜ -->
        <section class="section" id="section-participants" hidden>
          <header class="section-header">
            <h1>ä¼šè®®äººå‘˜</h1>
          </header>
          <div class="section-body">
            <div id="participantsNoMeeting" class="empty-hint" hidden>è¯·å…ˆåœ¨ã€Œä¼šè®®çœ‹æ¿ã€ä¸­åˆ›å»ºå¹¶é€‰æ‹©ä¸€ä¸ªä¼šè®®ã€‚</div>
            <div id="participantsContent" hidden>
              <div class="tabs">
                <button class="tab-button active" data-part-tab="grouping">ä¼šè®®åå•åˆ†ç»„</button>
                <button class="tab-button" data-part-tab="check">äººå‘˜æ£€æµ‹</button>
              </div>
              <!-- åˆ†ç»„ -->
              <div id="tabGrouping" class="tab-panel">
                <div class="card">
                  <div class="form-group-inline" style="align-items: flex-start;">
                    <label for="inputParticipantName">äººå‘˜å§“å</label>
                    <textarea
                      id="inputParticipantName"
                      rows="3"
                      style="flex: 1;"
                      placeholder="å¯ç²˜è´´å¤šä¸ªå§“åï¼Œä»¥é¡¿å·ã€é€—å·ã€ç©ºæ ¼ã€@ æˆ–æ¢è¡Œåˆ†éš”"
                    ></textarea>
                  </div>
                  <div class="form-group-inline">
                    <label for="inputParticipantDept">éƒ¨é—¨</label>
                    <input id="inputParticipantDept" type="text" placeholder="è¯·è¾“å…¥éƒ¨é—¨" />
                  </div>
                  <div class="form-actions-left">
                    <button id="btnAddParticipant" class="btn primary small">åŠ å…¥</button>
                  </div>
                </div>
                <div class="card">
                  <h3>äººå‘˜åå•ï¼ˆå¯ç›´æ¥ä¿®æ”¹éƒ¨é—¨å’Œå§“åï¼‰</h3>
                  <div id="participantsList" class="participants-list"></div>
                </div>
                <div class="card">
                  <div class="form-group-inline">
                    <label for="inputGroupCount">åˆ†å‡ ç»„ï¼Ÿ</label>
                    <input id="inputGroupCount" type="number" min="1" max="100" value="4" />
                    <button id="btnAutoGroup" class="btn secondary small">ä¸€é”®åˆ†ç»„</button>
                    <button id="btnSaveGroups" class="btn primary small">ä¿å­˜åˆ†ç»„</button>
                  </div>
                  <div id="groupsContainer" class="groups-container"></div>
                </div>
                <div class="form-actions">
                  <button id="btnParticipantsSave" class="btn secondary">ä¿å­˜</button>
                  <button id="btnParticipantsNext" class="btn primary">ä¸‹ä¸€æ­¥ï¼šä¿¡æ¯è¾“å‡º</button>
                </div>
              </div>
              <!-- äººå‘˜æ£€æµ‹ -->
              <div id="tabCheck" class="tab-panel" hidden>
                <div class="card">
                  <div class="form-group">
                    <label for="textareaCheck">è¯·ç²˜è´´å½“å‰ç°åœºçš„äººå‘˜åå•ï¼ˆæ¯è¡Œä¸€ä¸ªå§“åï¼Œç©ºè¡Œä¼šè‡ªåŠ¨å¿½ç•¥ï¼‰ï¼š</label>
                    <textarea id="textareaCheck" rows="8"></textarea>
                  </div>
                  <div class="form-actions-left">
                    <button id="btnCheck" class="btn primary small">ä¸€é”®æ£€æµ‹</button>
                  </div>
                </div>
                <div class="card two-column">
                  <div>
                    <h3>æ¼æ‰äººå‘˜</h3>
                    <ul id="missingList" class="check-list"></ul>
                  </div>
                  <div>
                    <h3>å¤šä½™äººå‘˜</h3>
                    <ul id="extraList" class="check-list"></ul>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </section>

        <!-- ä¿¡æ¯è¾“å‡º -->
        <section class="section" id="section-output" hidden>
          <header class="section-header">
            <h1>ä¿¡æ¯è¾“å‡º</h1>
          </header>
          <div class="section-body">
            <div id="outputNoMeeting" class="empty-hint" hidden>è¯·å…ˆåœ¨ã€Œä¼šè®®çœ‹æ¿ã€ä¸­åˆ›å»ºå¹¶é€‰æ‹©ä¸€ä¸ªä¼šè®®ã€‚</div>
            <div id="outputContent" hidden>
              <div id="outputCard" class="card output-card">
                <h2 id="outMeetingName">ä¼šè®®åç§°</h2>
                <section class="output-block">
                  <h3>ğŸ“ ä¼šè®®åœ°ç‚¹</h3>
                  <p id="outLocationText"></p>
                </section>
                <section class="output-block">
                  <h3>ğŸ“… ä¼šè®®è®®ç¨‹</h3>
                  <table class="agenda-table output-agenda-table">
                    <thead>
                      <tr>
                        <th>ç±»å‹</th>
                        <th>è®®ç¨‹</th>
                        <th>è´Ÿè´£äºº</th>
                        <th>æ—¶é•¿ï¼ˆåˆ†é’Ÿï¼‰</th>
                        <th>æ—¶é—´</th>
                      </tr>
                    </thead>
                    <tbody id="outAgendaTbody"></tbody>
                  </table>
                </section>
                <section class="output-block">
                  <h3>ğŸ‘¥ äººå‘˜åå•</h3>
                  <div id="outParticipantsByDept" class="output-part-block"></div>
                </section>
                <section class="output-block">
                  <h3>ğŸ“Œ äººå‘˜åˆ†ç»„</h3>
                  <div id="outGroups" class="output-part-block"></div>
                </section>
              </div>
              <div class="form-actions">
                <button id="btnCopyText" class="btn secondary">å¤åˆ¶å…¨æ–‡</button>
                <button id="btnExportImage" class="btn primary">ä¸€é”®å›¾ç‰‡åˆ†äº«</button>
              </div>
              <div id="downloadArea" class="download-area"></div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>
